{% extends 'base.html' %}
{% block title %}YOLO Detection â€“ Adversarial AI Hub{% endblock %}

{% block content %}
  <section class="hero d-flex flex-fill align-items-center text-center">
    <div class="container">
      <h1 class="display-4 fw-bold mb-4">YOLO Traffic Sign Detection</h1>
      <form method="post" enctype="multipart/form-data" class="d-flex justify-content-center">
        <div class="input-group input-group-lg w-50">
          <input
            type="file"
            class="form-control me-2"
            name="file"
            accept="image/*"
            required
          >
          <button
            type="submit"
            class="btn btn-light rounded-pill shadow-lg"
          ><i class="bi bi-image me-2"></i>Detect</button>
        </div>
      </form>
    </div>
  </section>

  {% if orig_image %}
  <section id="results-section" class="py-5 bg-light">
    <div class="container text-center">
      <h2 class="mb-4">Detection Results</h2>
      <div class="row g-4 justify-content-center">
        <!-- Original -->
        <div class="col-sm-8 col-md-5">
          <div class="card shadow-sm">
            <div class="card-header bg-white border-0">
              <h5 class="mb-0">Original Image</h5>
            </div>
            <div class="card-body">
              <img src="{{ url_for('static', filename='uploads/'~orig_image) }}"
                   class="img-fluid" alt="Original">
            </div>
          </div>
        </div>
        <!-- Detected -->
        <div class="col-sm-8 col-md-5">
          <div class="card shadow-sm">
            <div class="card-header bg-white border-0">
              <h5 class="mb-0">Annotated Image</h5>
            </div>
            <div class="card-body">
              <img src="{{ url_for('static', filename='uploads/'~det_image) }}"
                   class="img-fluid" alt="Detections">
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  {% endif %}

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      {% if orig_image %}
        document.getElementById('results-section')
                .scrollIntoView({behavior: 'smooth'});
      {% endif %}
    });
  </script>
{% endblock %}
